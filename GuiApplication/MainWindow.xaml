<Window x:Class="GuiApplication.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:GuiApplication"
        xmlns:forms="clr-namespace:GuiApplication.PopupForms"
        x:Name="WindowBindingWrapper"
        mc:Ignorable="d"
        Title="DnD Manager" Height="600" Width="900">
    <Window.Resources>
        <local:FileNameConverter x:Key="stringConverter"/>
    </Window.Resources>
    <TabControl x:Name="TabManager" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" ItemsSource="{Binding _tabs}" SelectionChanged="tabManager_SelectionChanged">

        <TabItem x:Name="FileManagerTab">
            <TabItem.Header>
                <StackPanel Orientation="Horizontal">
                    <TextBlock Margin="0,0,5,0">File Manager</TextBlock>
                    <!--<Button Content="X" Click="btnDelete_Tab"/>-->
                </StackPanel>
            </TabItem.Header>
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition/>
                    <ColumnDefinition/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="111*"/>
                    <RowDefinition Height="269*"/>
                    <RowDefinition Height="26*"/>
                </Grid.RowDefinitions>
                <TextBlock HorizontalAlignment="Center" Height="96"  TextWrapping="Wrap" VerticalAlignment="Center" Width="350" FontSize="25" FontWeight="Bold" TextAlignment="Center" Grid.Column="0" Grid.Row="0" Grid.ColumnSpan="2"  ><Run Text="Dungeons &amp; Dragons"/><LineBreak/><Run Text="Character Manager"/></TextBlock>
                <DockPanel x:Name="FilesBox" Grid.Column="0" Grid.Row="1" Margin="83,25,25,7" Background="#FFFFF2F2" LastChildFill="True" >
                    <StackPanel Orientation="Horizontal" DockPanel.Dock="Top">
                    <Label Content="Select Files:" FontWeight="Bold" Height="23" DockPanel.Dock="Top"/>
                    <Button Content="New File" x:Name="NewFileButton" Margin="125,5,0,2" Click="NewFileButton_Clicked"/>
                        <forms:NewFilePopup x:Name="NewPopup" IsOpen="False" PlacementTarget="{Binding ElementName=NewFileButton}" Placement="Bottom"/>
                    </StackPanel>
                    <Separator DockPanel.Dock="top"/>
                    <ScrollViewer  VerticalScrollBarVisibility="Auto">

                        <ItemsControl x:Name="FilesSelectionList" ItemsSource="{Binding ElementName=WindowBindingWrapper, Path=XmlFiles}" Margin="7,3,3,10" >
                            <!-- Programmatically adds checkboxes here -->
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <CheckBox Content="{Binding Converter={StaticResource stringConverter}}" Margin="0,0,0,5" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked"/>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>

                    </ScrollViewer>
                </DockPanel>
                
                <DockPanel Grid.Column="1" Grid.Row="1"  Margin="27,25,82,7"  Background="#FFEDF9FF">
                    <Label Content="Select View:" FontWeight="Bold" Height="23" DockPanel.Dock="Top"/>
                    <Separator DockPanel.Dock="top"/>
                    <ScrollViewer VerticalScrollBarVisibility="Auto" >

                        <StackPanel x:Name="ViewSelectionList" Margin="7,3,3,10" DataContext="{Binding ElementName=_selectedFiles}">
                            <Button Content="View All Entries" Margin="0,2,0,5" MaxWidth="300" Click="ViewSelectionList_ButtonClick"/>
                            <!--<Button Content="New Campaign" Margin="0,0,0,5" MaxWidth="300" Click="ViewSelectionList_ButtonClick"/>
                            <Button Content="New Group" Margin="0,0,0,5" MaxWidth="300" Click="ViewSelectionList_ButtonClick"/>-->
                            <!-- Programmatically adds buttons here -->
                        </StackPanel>

                    </ScrollViewer>

                </DockPanel>


            </Grid>

        </TabItem>

    </TabControl>

</Window>
